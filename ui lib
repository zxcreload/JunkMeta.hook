local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "MoltenClickGUI"
screenGui.Parent = playerGui

-- Create MainFrame
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 800, 0, 600)
mainFrame.Position = UDim2.new(0.5, -400, 0.5, -300)
mainFrame.BackgroundColor3 = Color3.new(1, 1, 1)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

-- Add minimal rounded corners to MainFrame
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 5)
corner.Parent = mainFrame

-- Add black inside outline to MainFrame
local stroke = Instance.new("UIStroke")
stroke.Thickness = 2
stroke.Color = Color3.new(0, 0, 0)
stroke.Parent = mainFrame

-- Create TitleLabel
local titleLabel = Instance.new("TextLabel")
titleLabel.Name = "TitleLabel"
titleLabel.Size = UDim2.new(1, 0, 0, 30)
titleLabel.Position = UDim2.new(0, 0, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "molten.exe"
titleLabel.TextColor3 = Color3.new(0, 0, 0)
titleLabel.TextSize = 20
titleLabel.Font = Enum.Font.SourceSansBold
titleLabel.Parent = mainFrame

-- Create Separator with gradient
local separator = Instance.new("Frame")
separator.Name = "Separator"
separator.Size = UDim2.new(1, 0, 0, 2)
separator.Position = UDim2.new(0, 0, 0, 30)
separator.BorderSizePixel = 0
separator.Parent = mainFrame

local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.new(0, 0, 0)),
    ColorSequenceKeypoint.new(1, Color3.new(1, 1, 1))
}
gradient.Parent = separator

-- Create TabsContainer
local tabsContainer = Instance.new("Frame")
tabsContainer.Name = "TabsContainer"
tabsContainer.Size = UDim2.new(1, 0, 0, 40)
tabsContainer.Position = UDim2.new(0, 0, 0, 32)
tabsContainer.BackgroundTransparency = 1
tabsContainer.Parent = mainFrame

-- Add UIListLayout to TabsContainer
local tabsLayout = Instance.new("UIListLayout")
tabsLayout.FillDirection = Enum.FillDirection.Horizontal
tabsLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
tabsLayout.VerticalAlignment = Enum.VerticalAlignment.Top
tabsLayout.SortOrder = Enum.SortOrder.LayoutOrder
tabsLayout.Parent = tabsContainer

-- Create ContentFrame
local contentFrame = Instance.new("Frame")
contentFrame.Name = "ContentFrame"
contentFrame.Size = UDim2.new(1, 0, 1, -72)
contentFrame.Position = UDim2.new(0, 0, 0, 72)
contentFrame.BackgroundColor3 = Color3.new(1, 1, 1)
contentFrame.BorderSizePixel = 0
contentFrame.Parent = mainFrame

local contentStroke = Instance.new("UIStroke")
contentStroke.Thickness = 1
contentStroke.Color = Color3.new(0, 0, 0)
contentStroke.Parent = contentFrame

-- Function to create a tab button and its content
local function createTabButton(name, iconId, layoutOrder)
    -- Create the tab button
    local tabButton = Instance.new("TextButton")
    tabButton.Name = "TabButton_" .. name
    tabButton.Size = UDim2.new(0, 100, 1, 0)
    tabButton.BackgroundColor3 = Color3.new(1, 1, 1)
    tabButton.Text = ""
    tabButton.LayoutOrder = layoutOrder
    tabButton.Parent = tabsContainer
    
    local tabStroke = Instance.new("UIStroke")
    tabStroke.Thickness = 1
    tabStroke.Color = Color3.new(0, 0, 0)
    tabStroke.Parent = tabButton
    
    local layout = Instance.new("UIListLayout")
    layout.FillDirection = Enum.FillDirection.Horizontal
    layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
    layout.VerticalAlignment = Enum.VerticalAlignment.Center
    layout.Padding = UDim.new(0, 5)
    layout.Parent = tabButton
    
    local icon = Instance.new("ImageLabel")
    icon.Name = "Icon"
    icon.Size = UDim2.new(0, 20, 0, 20)
    icon.BackgroundTransparency = 1
    icon.Image = "rbxassetid://" .. iconId
    icon.Parent = tabButton
    
    local tabText = Instance.new("TextLabel")
    tabText.Name = "Text"
    tabText.Size = UDim2.new(0, 0, 0, 20)
    tabText.BackgroundTransparency = 1
    tabText.Text = name:lower()
    tabText.TextColor3 = Color3.new(0, 0, 0)
    tabText.TextSize = 14
    tabText.Font = Enum.Font.SourceSans
    tabText.AutomaticSize = Enum.AutomaticSize.X
    tabText.Parent = tabButton
    
    -- Create the content frame for this tab
    local tabContent = Instance.new("Frame")
    tabContent.Name = "Content_" .. name
    tabContent.Size = UDim2.new(1, 0, 1, 0)
    tabContent.Position = UDim2.new(0, 0, 0, 0)
    tabContent.BackgroundTransparency = 1
    tabContent.Visible = false
    tabContent.Parent = contentFrame

    -- Create two sections inside the tab content
    local leftSection = Instance.new("Frame")
    leftSection.Name = "LeftSection"
    leftSection.Size = UDim2.new(0.5, -5, 1, -10)
    leftSection.Position = UDim2.new(0, 5, 0, 5)
    leftSection.BackgroundColor3 = Color3.new(1, 1, 1)
    leftSection.BorderSizePixel = 0
    leftSection.Parent = tabContent

    local leftStroke = Instance.new("UIStroke")
    leftStroke.Thickness = 1
    leftStroke.Color = Color3.new(0, 0, 0)
    leftStroke.Parent = leftSection

    -- Add inner frame to left section
    local leftInnerFrame = Instance.new("Frame")
    leftInnerFrame.Name = "LeftInnerFrame"
    leftInnerFrame.Size = UDim2.new(1, -10, 1, -10)
    leftInnerFrame.Position = UDim2.new(0, 5, 0, 5)
    leftInnerFrame.BackgroundColor3 = Color3.new(1, 1, 1)
    leftInnerFrame.BorderSizePixel = 0
    leftInnerFrame.Parent = leftSection

    local leftInnerStroke = Instance.new("UIStroke")
    leftInnerStroke.Thickness = 1
    leftInnerStroke.Color = Color3.new(0, 0, 0)
    leftInnerStroke.Parent = leftInnerFrame

    local rightSection = Instance.new("Frame")
    rightSection.Name = "RightSection"
    rightSection.Size = UDim2.new(0.5, -5, 1, -10)
    rightSection.Position = UDim2.new(0.5, 0, 0, 5)
    rightSection.BackgroundColor3 = Color3.new(1, 1, 1)
    rightSection.BorderSizePixel = 0
    rightSection.Parent = tabContent

    local rightStroke = Instance.new("UIStroke")
    rightStroke.Thickness = 1
    rightStroke.Color = Color3.new(0, 0, 0)
    rightStroke.Parent = rightSection

    -- Add inner frame to right section
    local rightInnerFrame = Instance.new("Frame")
    rightInnerFrame.Name = "RightInnerFrame"
    rightInnerFrame.Size = UDim2.new(1, -10, 1, -10)
    rightInnerFrame.Position = UDim2.new(0, 5, 0, 5)
    rightInnerFrame.BackgroundColor3 = Color3.new(1, 1, 1)
    rightInnerFrame.BorderSizePixel = 0
    rightInnerFrame.Parent = rightSection

    local rightInnerStroke = Instance.new("UIStroke")
    rightInnerStroke.Thickness = 1
    rightInnerStroke.Color = Color3.new(0, 0, 0)
    rightInnerStroke.Parent = rightInnerFrame

    -- Connect the tab button to show its content
    tabButton.MouseButton1Click:Connect(function()
        -- Hide all tab contents
        for _, child in ipairs(contentFrame:GetChildren()) do
            if child:IsA("Frame") then
                child.Visible = false
            end
        end
        -- Show this tab's content
        tabContent.Visible = true
    end)

    return tabButton
end

-- Clear any existing children in tabsContainer to avoid duplicates
for _, child in ipairs(tabsContainer:GetChildren()) do
    if child:IsA("GuiObject") then
        child:Destroy()
    end
end

-- Define the tabs with their names and icon IDs in the correct order
local tabs = {
    {name = "Rage", icon = "80111464738064"},
    {name = "Legit", icon = "120777153021476"},
    {name = "Visuals", icon = "129492097727596"},
    {name = "Movement", icon = "88552041142395"},
    {name = "Misc", icon = "101233326573754"},
    {name = "Target", icon = "125548071823133"},
    {name = "Settings", icon = "90578457475613"},
    {name = "Hud", icon = "133969573254874"}
}

-- Create all eight tabs in the desired order with explicit LayoutOrder
for i, tab in ipairs(tabs) do
    createTabButton(tab.name, tab.icon, i)
end

-- Drag and Drop functionality
local UIS = game:GetService("UserInputService")
local dragging = false
local dragInput
local dragStart
local startPos

local function updateInput(input)
    local delta = input.Position - dragStart
    mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

mainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

mainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UIS.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        updateInput(input)
    end
end)

-- Show the first tab's content by default
if contentFrame:FindFirstChild("Content_Rage") then
    contentFrame.Content_Rage.Visible = true
end
